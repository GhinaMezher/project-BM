---
title: "Data Management & Programming Project"
author: "Adrien BOUISSON & Ghina MEZHER"
format: html
warning: false
echo: false
message: false
editor: 
  markdown: 
    wrap: sentence
---

# Links and sources

The GitHub project can be found on: *https://github.com/GhinaMezher/project-BM*.git 2 collaborators can be found on this public project.

We will use the data base from the World Bank and International Labor Organization that identifies the public spendings in education: *https://data.worldbank.org/indicator/SE.XPD.TOTL.GD.ZS?end=2022&start=1970&view=chart* And for the data on youth unemployemnt rates depending on various caracteristics we will refer to the International Labor Organisation (ILO) database: *https://ilostat.ilo.org/fr/topics/youth/#*

```{r}
#| message: false
here::i_am("project-BM.Rproj")
library(here)
library(dplyr)
library(ggplot2)
library(tidyr)
library(vroom)
library(knitr)
```

# Attributing our databases to variables

```{r message=FALSE}
#| message: false
dep_pub_raw<-vroom(here("dep-pub-raw.csv"),delim=",")
dep_pub<-vroom(here("dep-pub-raw.csv"),skip=4)
chomage_jeune<-vroom(here("chomage-jeune-S-A-ST-raw.csv"))
```

# A short description of the sources used

Our topic of study in this project tackles the impact of education spending on the youth unemployment rate.
For that, we have decided to take our databases from sites such as the World Bank and the International Labor Organization (ILO), as these are major global institutions known primarily for their availability and accessibility.
For example, World Bank compiles and makes available a wide range data on global economic development such as expenditures in school per country.
We're interested in every country in the world, which explain why we haven't included OECD data, which is limited to 40 countries.

Our databases are dense, which requires delimiting our subject such as the period on which we are going to be interested or the variables that we consider to be most relevant.

# Description of the World bank database

First, many of the databases provided by the World Bank include time series data, allowing to analyze trends and changes over time.
It could be essential for understanding the dynamics of variables.
Then, the World Bank is known for maintaining high standards in databases.
There is data reliability, World Bank data is generally subject to rigorous standards and quality controls.
As part of our project, the database from World Bank enable to make international comparisons by collecting data from many countries, allowing for international comparisons of school expenditure for example.

Finally, by analyzing World Bank data on school expenditures, we can merge this database with the youth unemployment rate to study the correlation (or causality) of education spending on the unemployment rate.

It means that we could observe that the higher education spending led to the lower youth unemployment rate, or that the high youth unemployment rate can be explained by higher spending on education.

We have described below the necessary informations of our database from the World Bank, which we have summarized in a table:

## A table summary of our WB database

```{r echo:false}

#Our dep_pub_raw variable contains our dataset as it is wrongly read by R. We must keep it in order to retrieve information on the origin of the dataset and on its last update date as they are contained in the first 4 lines that make R reading our dataset complicated.

table_dep<-colnames(dep_pub_raw)
dep_pub|>
  summarise("Origin"=table_dep[2],"Last update"= dep_pub_raw[[1,2]],
            "Nb of rows"=n(),
            "Nb of columns"=ncol(dep_pub),
            "First date"=colnames(dep_pub)[5],
            "Last date"=colnames(dep_pub)[67],
            )|>
  knitr::kable()
```

## Variable description

-   "Country Name"/"Country Code": String value giving us an indicator for each country to classify values

-   "Indicator Name"/"Indicator code": String value giving us the indicator studied with is the government expenditure on education as % of GDP

-   "Date": each column referring to a date for the % of GDP for government education spending going from 1960 to 2022

# Description of the International Labor Organisation database

Then, the International Labor Organization (ILO) provides a wealth of data related to labor and employment.
The ILO sets international standards for labor and labor statistics.
These standards guarantee a consistent methodology for the collection and presentation of data on the labor market, including the unemployment rate.This site therefore corresponds perfectly to our project.

ILO data offers comprehensive insights into the global labor marker, especially unemployment in the world, and youth unemployment (15-29 years old).
Initially, we wanted to take a database on the youth unemployment rate from the World Bank but that of the ILO is more exhaustive and takes a larger age range.
Then, like the World Bank, the ILO collects and compiles data on youth unemployment from a wide range country, allowing for international comparisons which is perfect for our project because we can therefore study the impact of education spending on youth unemployment rate.
Both sites making international comparisons, it's therefore interesting for our subject of study.
The ILO has many databases on young people, which give us a free choice to use the one that interest us the most and is most relevant to our project (this is also the case with the World Bank).

The difficulties of ILO database is the description of variables that need to be define.
To do this, we need to look up the code dictionary used by the ILO.
As we did for the World Bank data base we have described below the necessary information of our database from the ILO, which we have summarized in a table:

## A table summary of our ILO database

```{r}
# Our database chomage_jeune contains a huge number of observations with 11 variables, so we'll remove the missing NA values to reduce the number of observations.

table_chomage<-colnames(chomage_jeune)
chomage_jeune|>
  summarise("Origins"=table_chomage[1],
            "Nb of rows"=n(),
            "Nb of columns"=ncol(chomage_jeune),
            "Nb of countries"= length(unique((chomage_jeune$ref_area))),
            "Nb of sex"= length(unique((chomage_jeune$sex))),
            "Age groups "= length(unique((chomage_jeune$classif1))),
            "Time " = length(unique((chomage_jeune$time))) 
            )|>
  knitr::kable()
```

The names of the variables in the ILO database weren't clear enough for us, so we decided to rename them to make them easier to understand.

```{r}
#We rename the column to better understand the variables

colnames(chomage_jeune)[colnames(chomage_jeune) == "ref_areas"] <- "Country"
colnames(chomage_jeune)[colnames(chomage_jeune) == "classif1"] <- "Age groups"
colnames(chomage_jeune)[colnames(chomage_jeune) == "classif2"] <- "Attendance"
chomage_jeune <- chomage_jeune |> 
  mutate(`Age groups`=case_when(`Age groups`=="AGE_YTHBANDS_Y15-19" ~ "15-19",
                                `Age groups`=="AGE_YTHBANDS_Y15-29" ~ "15-29",
                                `Age groups`=="AGE_YTHBANDS_Y20-24" ~ "20-24",
                                `Age groups`=="AGE_YTHBANDS_Y25-29" ~ "25-29",
         TRUE ~`Age groups`))
chomage_jeune<-chomage_jeune|>
  mutate(`sex`=case_when(`sex`=="SEX_M"~"Male",
                       `sex`=="SEX_F"~"Female",
                       `sex`=="SEX_T"~"Total",
                       TRUE~`sex`))
```

## Variable description

### We have to look the dictionaries for the code used (i.e code list) from ILO

"Ref area": String value giving us each country's code, for example "AFG" for Afghanistan.
It can refer to countries, geographic regions, groups of countries (by income level or others) or the world

"Indicator" & "Source": it includes information on the represented variables, the classifications used and the unit which is number (NB)

"Source" : "BA:15715","EPA - Enquête sur la Population Active","AFG" ; "BB:6361","ERDM - Enquête sur les Conditions de Vie des Ménages","AFG".
The specific source of the data, including information on the country or region for which it is used and the main type of source (population census, labour force survey, administrative records, etc.) as well as the precise name of the source.

"sex": string value giving us the sex, three categories: total, male & female.
The breakdown by sex and the items of this breakdown.

"classif1": string value giving us the youth range, three categories: 15-19, 20-24, 25-29, 15-29, for example "AGE_YTHBANDS_Y15-29","Age (Tranches des jeunes): 15-29"

"classif2": string value giving us the status of students, three categories :

-   "STU_EDU_TOTAL","Fréquentation scolaire: Total"
-   "STU_EDU_NO","Fréquentation scolaire: Ne participe pas"
-   "STU_EDU_X","Fréquentation scolaire: Non classé ailleurs"

"time": string value giving us the date of the observation

"obs_value": observed value according to each category

"obs_status":the values status or flag on the values, such as breaks in series or provisional values, "U" for not reliable and "B" for discontinued

"note_indicator": metadata related to the classifications used and specific classification categories

"note_source": metadata related to the data source, it's a resting place (repositoire in french)

# Data joining and cleaning

## Cleaning the WB database

In order to clean our world bank database we must delete columns/variables who have a unique value and dates that only have NA values.
We rename our "Country Code" variable to "Country" and pivot our data frame in order to have a "time" variable to match the ILO database.

```{r}
dep_pub_cleaning<-function(df){
  single_value<-function(my_var){
  (my_var|>unique()|>length())==1
  }
  country_codes<-df|>distinct(`Country Name`, `Country Code`)
  df_clean<-df|>
    select(-`Country Name`)|>
    rename(Country=`Country Code`)|>
    select(!where(\(.x)all(is.na(.x))))|>
    select(!where(single_value))|>
    pivot_longer(cols = -Country, names_to = "time", values_to = "Public Spending")
}

dep_pub_clean<-dep_pub_cleaning(dep_pub)
```

## Cleaning the ILO database

We remove some column which will not used for the projet like "Source", "Indicator", "obs_status", "note_indicator", "note_source", and we create a new database called chomage_jeune_clean.These are just codes used by the ILO to classify data.

```{r}
chomage_jeune_cleaning<-function(df){
  single_value<-function(my_var){
  (my_var|>unique()|>length())==1
  }
  df_clean<-df|>
    rename(Country=ref_area)|>
    select(!where(\(.x)all(is.na(.x))))|>
    select(!where(single_value)) |>
    select(-"source", -"obs_status", -"note_source", -"note_indicator")
}
chomage_jeune_clean<-chomage_jeune_cleaning(chomage_jeune)
```

## Data joining

```{r}
dep_chomage<-merge(dep_pub_clean,chomage_jeune_clean,by=c("Country","time"))
```

We use merge to join our 2 databases in order to match them by country (variable "Country") and date (variable "time").

## A table summary of our new database

```{r}
dep_chomage|>
  summarise("Title"="Public spendings and unemployment according to date and country",
            "Nb of rows"=n(),
            "Nb of columns"=ncol(dep_chomage),
            "Nb of country"=length(unique(dep_chomage$Country)),
            "Age groups"=length(unique(dep_chomage$`Age Groups`)),
            "Time frame"=paste(min(dep_chomage$time),"-",max(dep_chomage$time)))|>
  knitr::kable()
            
            #"Time " = length(unique((dep_chomage$time)))))|>
```

# Description of research question

Education is considered a fundamental element of human development, it is also a fundamental right as it is mentioned in the universal declaration of Human rights of 1948.
Economic research in education became a complete and independent field of study in the 50s along with the Theory of human capital we owe to the economists Schultz, Becker and Mincer.

This theory enunciates that one can invest in human capital (that is constituted of education, health, social protection and access to information) just like investing in physical capital like machinery, it highlights a causality relationship between years of schooling and wages.
The theory of human capital was frivolously studied and applied to empirical studies and many econometric models in order to test its veracity and limits.
In order to form the subject of our study we begun with the same idea as the theory of capital : how can altering the offer of education impacts individuals' status on the labor market.

However, in a will to understand the role the government must play when it comes to the offer in education we may ask ourselves : Should government leaders expect their educational spending to impact the unemployment rate ?

Thanks to the richness of information in our ILO data base we will be able to study the impact of public educational spending (from the WB database) on the educational aspect of human capital.
With the detailed information from various countries and on a big date range, we are able to study the impact on a micro and macro level.
The micro impact can be observed by studying each country on its own and observing the variations throughout the years.
This also makes comparing countries possible; we could therefore observe the impact on developing countries and developed countries.
We can therefore compare the effects of education spending on the youth unemployment rate within countries, i.e. between men and women, and between countries, i.e. the macroeconomic impact of education spending.

We would like to highlight the real and empirical impact of the augmentation of educational spending on school attendance thanks to the "classif2" variable now called "Attendance".
Through this potential correlation and causality we could understand the impact of a budgetary politic in education on unemployment.
The underlying assumption is that a positive correlation between increased educational spending and higher attendance rates could translate into a subsequent decline in unemployment figures over the ensuing years.
Therefore the project endeavors to decipher how these factors (public spending and attendance) interplay in the context of unemployment rates.

A higher unemployment rate could also prompt governments to allocate more funds to education as a way to respond to the need for training to boost employability, we therefore see a potential double causality between educational spending and unemployment.
The potential reciprocal influence between educational investments and workforce participation unveils a complex interplay, emphasizing the need for nuanced analysis to comprehend the multifaceted impact of education on labor markets.

Ultimately, this exploration aims to inform policy decisions, offering insights into the interwoven pathways that shape both educational outcomes and employment prospects, fostering more holistic approaches towards societal development.

# Graph analysis

We'll produce two graphs to show the impact of education spending on the youth unemployment rate within a country, using France as an example, and between countries, comparing France with Germany. 

## Comparisons within country : the example of France 

### Comparisons between ages and sex
```{r}
dep_chomage|>
  filter(Country == 'FRA')|>
  group_by(Country)|>
  ggplot(aes(x = time, y = `Public Spending`,color=`Age groups`)) +
  geom_point() + 
  facet_wrap(~sex)+
  theme(axis.text.x=element_text(angle=45,hjust=1))+
  labs(x = "Date", y = "Public Spending", title = "Public Spending for France")
```
We can see that the unemployment rate for young people in general, taking both men and women, has fallen from 2005 to 2020 for 15-29 year-olds. This graph shows the difference in unemployment rates between age groups.  

### Comparisons between ages 

```{r}
dep_chomage %>%
  filter(Country == 'FRA') %>%
  group_by(Country) %>%
  ggplot(aes(x = time, y = `Public Spending`, color = `Age groups`)) +
  geom_point(size = 3, position = position_dodge(width = 0.5)) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  labs(x = "Date", y = "Public Spending", title = "Public Spending for France")
```
This graph shows the evolution of the unemployment rate over the period 2005-2021, from which we can deduce the impact of public spending. Cyclical variations linked to a pandemic (e.g. COVID in 2020) or an economic/financial crisis (e.g. the subprime crisis in 2007/2008) can bias the effect of public spending on unemployment. 

## Comparison between country 

```{r}
dep_chomage %>%
  filter(Country %in% c('FRA', 'AFG')) %>%
  group_by(Country) %>%
  ggplot(aes(x = time, y = `Public Spending`, color = `Age groups`)) +
  geom_point() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  labs(x = "Date", y = "Public Spending", title = "Public Spending for France and Afghanistan")
```
